---
title: "[VueJS] deep selector"
---

# [VueJS] deep

Vue-Loader 에서는 deep selector 라는 강력한 기능을 제공하고 있다.

https://vue-loader.vuejs.org/guide/scoped-css.html#deep-selectors

상위 컴포넌트에서 하위 컴포넌트의 css에 접근해서 사용할 수 있는 기능으로, 라이브러리를 사용했을 때 라이브러리 컴포넌트 CSS를 따로 사용하기 번거롭거나 해당 라이브러리 컴포넌트 CSS가 Scoped 상태이기를 원할 때 쓸 수 있는 기능으로 생각된다.

Vue-Loader 에서 기존에는 /deep/ 의 형태로 사용해야 했지만, 이 문법 자체는 deprecated 될 예정이고 >>> 를 쓰는 것을 추천하고 있다.

https://github.com/vuejs/vue-loader/issues/913

그런데 일반적인 CSS를 사용했을 때 deep의 기능은 단순히 하위 컴포넌트의 자식 요소를 찾을 때 사용할 수 있지만, SASS 와 같은 전처리 도구와 만나면 상위 요소들을 선택할 수 있게 된다.

이런 경우 >>> 대신에 /deep/ 을 사용해 한다. SASS에서 deep과 관련된 공식적인 문서를 아직 찾지 못해 아쉽지만, 스택오버플로우나 각종 블로그에 사용방법이 잘 나와있다.

사실 이 deep 을 사용하는 것은 어떻게 보면 scoped 라는 기능을 무너뜨릴 수 있는 위험한 존재가 될 수 있다. 당연히 남용하라고 만든 것은 아니며 반드시 필요한 경우에만 사용하는 것이 좋을 것 같다.

하위 컴포넌트에 접근하기 위한 deep 은 되도록이면 최하위 요소 컴포넌트에서 라이브러리 컴포넌트를 사용할 때 정도에 쓰는 것은 안전할 것이다.

반대로 상위 컴포넌트는 무수히 많을 수 있기 때문에 중간 요소를 건드리는 것은 매우 위험할 가능성이 높다. 따라서 중간 요소보다는 테마 작업을 위해 최상단의 상징적인 요소 클래스를 가져와서 쓰는 것이 좋다. 테마 작업을 위해서 styled-component 방식을 채용하는 것도 좋은 방법이지만, styled-component를 사용하기 위해 추가적인 로직을 사용하는 것이 꺼려지고, CSS로 좀 더 많은 것을 해결하고 싶다면 사용할 수 있는 좋은 선택지가 될 것으로 생각한다. 우선 최상단의 상징적인 클래스를 지정하고, 각 컴포넌트에서 해당 클래스에 맞춘 CSS를 각각 가지고 있다면 큰 문제는 발생하지 않을 것이기 때문이다.
